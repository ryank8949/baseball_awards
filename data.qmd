# Data

## Description
To obtain year-end awards data, I downloaded a dataset from the Lahman Baseball database. The Lahman Baseball database was created by SABR (Society for American Baseball Research) member Sean Lahman. It contains individual player and team stats per year from 1871 through 2024. This data is available in downloadable .csv files or as a downloadable SQL database. The awards dataset contains 12,462 rows and 6 columns. The dataset contains the standard awards of Most Valuable player, Cy Young, Gold Glove, and Rookie of the Year. Awards given out on a more frequent basis such as Player of the Week, and year-end awards that are more subsidiary such as the Outstanding DH Award, Reliever of the Year Award, and MLB Players Choice Outstanding Pitcher are also included in the dataset. The standard year-end awards of Most Valuable Player and Cy Young are of interest, so the dataset was filtered for these awards. The Most Valuable player (MVP) denotes the player which is deemed to have contributed the most to the success to their team. The Cy Young Award is similar, but is limited to pitchers. While rare, a pitcher is able to win MVP. To note, while all-star could be a powerful award for understanding player evaluation, it is not a year-end award so it was excluded.

To obtain player statistics, the pybaseball library was used. This library scrape Baseball Reference, Baseball Savant, and Fangraphs, all reliable MLB statistics websites. The data of interest are aggregate statistics per player, per year. There are many columns of data. In my analyses, I selected several variables based on the significance and notoriety of a given statistic. I pulled statistics from 1911 and onward, since the first MVP was awarded in 1911. The first Cy Young was awarded in 1956. To note, I used this package instead of obtaining data from the source websites because many of these sites have limited access or ability to download significant datasets easily. However, I still cited the relevant source websites in the bibliography. For most years of data, I filtered for players who had at least 300 plate appearances and filtered for pitchers who had at least 40 qualified innings pitched. For years where there was a shortened season, I lowered the threshold for qualified appearances in accordance with the number of games played in that season. For example, the pandemic-shortened season of 2020 was only 60 games long for each team, so I lowered the thresholds to 80 plate appearances and 5 innings pitched.

Data processing was done in Python. The processing presented a challenge. There was not a common player identifier between the awards dataset and the player statistics dataset. I ended up using a finding a separate file that exists for translation between baseball statistics datasets. The WAR (Wins Above Replacement) leader flag is a calculated variable. It took quite a bit of processing to properly process and merge the flag into the dataset, mainly because requisite data points for aggregation lived in different datasets. Even with this processing, the dataset was not fully complete, so I manually adjusted records that remained incomplete.

Lastly, pitchers who won MVP were excluded from the MVP/WAR analysis. The batter dataset and pitcher datasets are separate and were not easy to combine, so I left them separate. I believe that excluding pitchers from that analysis is okay because pitchers rarely win MVP. Since 1956, there have only been 11 pitchers to win MVP, out of 138 total.

References  
pybaseball. (2023, September 8). *pybaseball 2.2.7*. PyPI. Retrieved December 8, 2025, from
https://pypi.org/project/pybaseball/  

Society for American Baseball Research. (2025, October 30). *Lahman Baseball Database*. SABR.
Retrieved December 8, 2025, from https://sabr.org/lahman-database/  
FanGraphs. (n.d.). *FanGraphs â€” Baseball Statistics and Analysis*. Retrieved December 8, 2025, from
https://www.fangraphs.com/  

Major League Baseball Advanced Media. (n.d.). *Statcast Search*. Retrieved December 8, 2025, from
https://baseballsavant.mlb.com/statcast_search  


## Missing value analysis
For each player, there are certain statistics which should always be present. Statistics such as name, games played, hits, home runs, batting average, strikeouts, and innings pitched should be complete. These represent some of the foundational metrics of baseball. There are also more advanced statistics created over time that incorporate these foundational metrics in formulas, such as OBP (on-base percentage) and SLG (slugging percentage). Since the oldest statistics can be referenced in these formulas, these metrics should be complete too. There are modern statistics that were introduced in 2015 with the implementation of Statcast, MLB's advanced player and ball tracking system. These values, such as EV (exit velocity), LA (Launch Angle), and HardHit are missing for any records that predate 2015. This is because the technology to track these metrics was not implemented.

With the above said, I created the main dataset via a join into the awards database, which contains awards for both hitters and pitchers. As a result, there are pitchers and hitters that appear across datasets. A pitcher in the hitter dataset will have all N/A values and a hitter in the pitcher dataset will have all N/A values.

There were several MVP winners for which the WAR leader flag was not properly calculated (they displayed as NA instead of 0 or 1). I manually adjusted these records.

```{r}
library(dplyr)
library(tidyr)
library(ggplot2)
library(scales)

mvp_df <- read.csv('/Users/ryan/Desktop/STAT5702GR/final_project/mvp_hitting_dataset.csv')
mvp_df_h <- mvp_df %>% 
  filter(!is.na(AVG)) # Filtering out pitchers in the MVP dataset

cy_df <- read.csv('/Users/ryan/Desktop/STAT5702GR/final_project/cy_young_pitching_dataset_rev.csv')

hitting_df <- read.csv('/Users/ryan/Desktop/STAT5702GR/final_project/hitting_dataset_all.csv')
pitching_df <- read.csv('/Users/ryan/Desktop/STAT5702GR/final_project/pitching_dataset_all.csv')
```


```{r}

missing_summary <- hitting_df %>%
  summarise(across(everything(), ~ mean(is.na(.)))) %>% 
  pivot_longer(everything(), names_to = "variable", values_to = "pct_missing") %>%
  arrange(desc(pct_missing))
```

```{r}

ggplot(missing_summary, aes(x = pct_missing, y = reorder(variable, pct_missing))) +
  geom_col(fill = "#1f78b4") +
  scale_x_continuous(labels = percent_format(accuracy = 1)) +
  labs(
    title = "Proportion of Missing Values by Variable: Hitter Dataset",
    x = "Percent Missing",
    y = "Variable"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    axis.text.y = element_text(size = 8)
  )

```
The graph shows that values are relatively uniformly missing. This is because stats are missing for hitters in the pitcher dataset and vice versa, as was mentioned above.

```{r}

pitching_missing_summary <- pitching_df %>%
  summarise(across(everything(), ~ mean(is.na(.)))) %>%
  pivot_longer(everything(), names_to = "variable", values_to = "pct_missing") %>%
  arrange(desc(pct_missing))
```

```{r}

ggplot(pitching_missing_summary, aes(x = pct_missing, y = reorder(variable, pct_missing))) +
  geom_col(fill = "#1f78b4") +
  scale_x_continuous(labels = percent_format(accuracy = 1)) +
  labs(
    title = "Proportion of Missing Values by Variable (Pitching Dataset)",
    x = "Percent Missing",
    y = "Variable"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    axis.text.y = element_text(size = 8)
  )
```
Many of the missing value columns (outside of Statcast-related columns) mirror each other, which is expected given the way which this dataset was compiled.


